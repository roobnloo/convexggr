---
title: "Untitled"
author: "Robin Liu"
date: '2022-07-28'
output: html_document
---

```{r setup, include=FALSE}
library(tidyr)
library(xtable)
library(tables)
source("test_utils.R")
```

```{r}
result <- readRDS("output/p50q50n200reparamTRUEtrials50.rds")
```

```{r}
result
```

```{r}
avg_perf <- rbind(apply(result$gmmreg, 2, mean),
                  apply(result$gmmreg, 2, sd),
                  apply(result$cggr, 2, mean),
                  apply(result$cggr, 2, sd))
colnames(avg_perf) <- c("TPR", "FPR", "beta_err", "mean_err", "omega_err")
rownames(avg_perf) <- c("gmmreg", "(sd)", "cggr", "(sd)")
```

```{R}
varhatdf <- data.frame(
  cggr = as.numeric(1/result$cggr_varhat),
  gmmreg = as.numeric(1/result$gmmreg_varhat))

varhatdf |>
  pivot_longer(c("cggr", "gmmreg"), names_to = "method", values_to = "varhat") |>
  ggplot(mapping = aes(x = varhat, y = method, fill = method)) +
  geom_boxplot() +
  geom_jitter(color="black", size=0.4, alpha=0.9)
```
